<html>
<head>
    <link type="application/atom+xml" rel="alternate" title="cf020031308 Atom Feed" href="atom.xml">
    <link rel="stylesheet" href="index.css">
    <template>
    <link rel="icon" type="image/x-icon" href="$icon" />
    <title > $title </title>
    </template>
</head>
<body>
    <center id="js_required">
        <p> Welcome to my Blog </p>
        <p> This page is only functional for browsers which support javascript. </p>
        <p> But without it you can still <a href="/blog/atom.xml"> Subscribe the Atom feed</a>. </p>
    </center>
<template>
<header>
    <h1> $subtitle </h1>
    var repo;
    for (var i = 0; i < link.length; i++) {
        if (link[i].rel == "repo") {
            repo = link[i].href;
            break;
        }
    }
    <p><a target="_blank" href="$repo/issues/new"> Comment </a></p>
</header>
<nav>
</nav>
<main>
    var formatDate = function(d) {
        return new Date(d).toLocaleString({}, {
            year: "numeric",
            month: "short",
            day: "2-digit",
            hour12: false,
            hour: "2-digit",
            minute: "2-digit",
        });
    }
    for (var i = 0; i < entry.length; i++) with(entry[i]) {
        <article id="$id">
            <h4><a target="_blank" href="$link.href"> $title </a></h4>
            <time datetime="$published" pubdate="pubdate"> $formatDate(published) </time>
            <blockquote> $summary </blockquote>
            if (entry[i].comment) {
                <a target="_blank" href="$comment.href"> Comment </a>
            }
        </article>
    }
</main>
<footer>
    <div> $rights </div>
</footer>
</template>

<script src="index.js"></script>
<script>
    var rssEl = document.head.querySelector('link[type="application/atom+xml"]');
    var req = http("get", rssEl.href);
    if (req.readyState == 4 && req.status < 500 && req.responseXML) {
        var data = xml2obj(req.responseXML.querySelector("feed"));
        var tplEls = document.getElementsByTagName("template");
        while (tplEls.length) {
            var tplEl = tplEls[0];
            tplEl.outerHTML = Template(decode_entity(tplEl.innerHTML))(data);
        }
    }

    var el = document.getElementById("js_required");
    el.parentNode.removeChild(el);
</script>
</body>
</html>
